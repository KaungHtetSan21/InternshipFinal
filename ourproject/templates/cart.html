{% extends 'base.html' %}
{% load static %}

{% block content %}
<!--Body Content-->
<div id="page-content">
  <!--Page Title-->
  <div class="page section-header text-center">
    <div class="page-title">
      <div class="wrapper">
        <h1 class="page-width">Your cart</h1>
      </div>
    </div>
  </div>
  <!--End Page Title-->

  <div class="container">
    <div class="row">
      <div class="col-12 col-sm-12 col-md-8 col-lg-8 main-col">
        <form action="#" method="post" class="cart style2">
          {% csrf_token %}
          <table>
            <thead class="cartrow cartheader">
              <tr>
                <th colspan="2" class="text-center">Product</th>
                <th class="text-center">Price</th>
                <th class="text-center">Quantity</th>
                <th class="text-right">Total</th>
                <th class="action">&nbsp;</th>
              </tr>
            </thead>
            <tbody>
              {% for i in cart_items %}
              <tr class="cart__row border-bottom line1 cart-flex border-top">
                <td class="cart__image-wrapper cart-flex-item">
                  <a href="#"><img class="cart__image" src="{{ i.item.item_photo.url }}" alt="{{ i.item.item_name }}"></a>
                </td>
                <td class="cart__meta small--text-left cart-flex-item">
                  <div class="list-view-item__title">
                    <a href="#">{{ i.item.item_name }}</a>
                  </div>
                  <div class="cart__meta-text">
                    Category: {{ i.item.category.category_name }}<br>
                    Disease: {{ i.item.disease.disease_name }}
                  </div>
                </td>
                <td class="cart__price-wrapper cart-flex-item text-center">
                  <span class="money">${{ i.item.item_price }}</span>
                </td>
                <td class="cart__update-wrapper cart-flex-item text-center">
                  <div class="cart__qty text-center">
                    <div class="qtyField">
                      <input class="cart__qty-input qty" type="text" name="qty_{{ i.id }}" value="{{ i.qty }}" pattern="[0-9]*">
                    </div>
                  </div>
                </td>
                <td class="text-right small--hide cart-price">
                  <div><span class="money">${{ i.price }}</span></div>
                </td>
                <!-- <td class="text-center small--hide">

                    <i class="icon icon anm anm-times-l"></i>
                  </a>

                </td> -->
              </tr>
              {% endfor %}
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="text-left">
                  <a href="{% url 'homeview' %}" class="btn--link cart-continue"><i class="icon icon-arrow-circle-left"></i> Continue shopping</a>
                </td>
                <td colspan="3" class="text-right">
                  <button type="submit" name="update" class="btn--link cart-update"><i class="fa fa-refresh"></i> Update</button>
                </td>
              </tr>
              <tr>
                <td colspan="6" class="text-right"><strong>Total: ${{ total_amount }}</strong></td>
              </tr>
            </tfoot>
          </table>

          <div class="currencymsg">
            We process all orders in USD. Checkout will use USD at the most current exchange rate.
          </div>
          <hr>

          <!-- Optional: Shipping Calculator -->
          <!-- (keep your existing shipping form here if needed) -->
        </form>
      </div>
    </div>
  </div>
</div>
<!--End Body Content-->
{% endblock content %}