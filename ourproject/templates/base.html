{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Medic System{% endblock %}</title>
  <!-- CDN CSS -->
  <link rel="shortcut icon" href="{% static 'assets/images/favicon.png' %}" />
  <!-- Plugins CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/plugins.css' %}" />
  <!-- Bootstap CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}" />
  <!-- Main Style CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" /> -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    .offcanvas-backdrop {
      z-index: 1040;
    }

    .sidebar-desktop {
      width: 220px;
      position: fixed;
      top: 56px;
      /* height of navbar */
      bottom: 0;
      background: #2c3e50;
      overflow-y: auto;
      padding-top: 1rem;
    }

    .content-wrapper {
      margin-left: 220px;
      padding: 1rem;
      margin-top: 56px;
      /* height of navbar */
    }

    @media (max-width: 991px) {
      .sidebar-desktop {
        display: none;
      }

      .content-wrapper {
        margin-left: 0;
      }
    }
  </style>

</head>

<body>

  <!-- Navbar (fixed top) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <!-- Toggle button for mobile sidebar -->
      <button class="navbar-toggler me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Left header content -->
      <div class="navbar-brand">
        <i class="fas fa-globe"></i> USD
        <i class="fas fa-phone ms-3"></i> +440 0(111) 044 833
      </div>

      <!-- Right header nav -->
      <div class="ms-auto d-flex align-items-center">

        {% if request.user is not anonymounsuser %}
        <li><a href="">{{request.user}}</a></li>
        {% else %}
        <li><a href="">logout</a></li>
        {% endif %}
        <a href="{% url 'customer_register' %}" class="nav-link text-white">CREATE ACCOUNT</a>

        <div class="dropdown position-relative">
          <a class="nav-link dropdown-toggle position-relative" href="#" role="button" data-bs-toggle="dropdown">
            <i class="fas fa-bell"></i>
            {% if expiring_count > 0 %}
            <span class="badge bg-danger">{{ expiring_count }}</span>
            {% endif %}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            {% if expiring_count == 0 %}
            <li><span class="dropdown-item">No upcoming expiries</span></li>
            {% else %}
            {% for item in expiring_items %}
            <li>
              <a class="dropdown-item text-danger">
                {{ item.item_name }} - Exp: {{ item.exp_date|date:"d M Y" }}
              </a>
            </li>
            {% endfor %}
            {% endif %}
          </ul>
        </div>


      </div>
    </div>
  </nav>

  <!-- Offcanvas for Mobile Sidebar -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar">
    <div class="offcanvas-body bg-dark text-white p-0">
      <h5 class="p-3">Medic App</h5>
      <hr class="m-0 bg-secondary">
      <nav class="nav flex-column">
        <a class="nav-link text-white" href=""><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        <a class="nav-link text-white" href=""><i class="fas fa-shopping-cart"></i> Cart</a>
        <a class="nav-link text-white" href=""><i class="fas fa-plus"></i> Add Medicine</a>
        <a class="nav-link text-white" href=""><i class="fas fa-pills"></i> Medicines</a>
        <a class="nav-link text-white" href=""><i class="fas fa-user-plus"></i> Supplier</a>
        <a class="nav-link text-white" href=""><i class="fas fa-list"></i> Suppliers</a>
      </nav>
    </div>
  </div>

  <!-- Desktop Sidebar -->
  <div class="sidebar-desktop">
    <h5 class="text-center text-light">Medic App</h5>
    <hr class="bg-secondary my-2">
    <div class="text-center mb-4">
      <img src="" alt="User" class="rounded-circle mb-2" />
      <p class="mb-0">{{ request.user.username }}</p>
    </div>
    <nav class="nav flex-column">
      <a class="nav-link text-white" href=""><i class="fas fa-tachometer-alt"></i> Dashboard</a>
      <a class="nav-link text-white" href=""><i class="fas fa-shopping-cart"></i> Cart</a>

      <button class="btn btn-toggle align-items-center rounded collapsed text-white ps-3 text-start" 
             data-bs-toggle="collapse" data-bs-target="#medicine-collapse" aria-expanded="false">
       ðŸ’Š Medicines
    </button>
      <div class="collapse" id="medicine-collapse">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-4">
           <li><a href="{% url 'addproduct' %}" class="link-light d-block py-1">âž• Add Medicine</a></li>
           <li><a href="{% url 'medview' %}" class="link-light d-block py-1">ðŸ“‹ View Medicines</a></li>
         </ul>
        </div>
      <button class="btn btn-toggle align-items-center rounded collapsed text-white ps-3 text-start" 
             data-bs-toggle="collapse" data-bs-target="#diseases-collapse" aria-expanded="false">
       ðŸ’Š Diseases
    </button>
      <div class="collapse" id="diseases-collapse">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-4">
           <li><a href="{% url 'adddisease' %}" class="link-light d-block py-1">âž• Add Diseases</a></li>
           <li><a href="{% url 'dis_view' %}" class="link-light d-block py-1">ðŸ“‹ View Diseases</a></li>
         </ul>
        </div>
        <button class="btn btn-toggle align-items-center rounded collapsed text-white ps-3 text-start" 
             data-bs-toggle="collapse" data-bs-target="#supplier-collapse" aria-expanded="false">
       ðŸ’Š Supplier
    </button>
      <div class="collapse" id="supplier-collapse">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-4">
           <li><a href="{% url 'addsupplier' %}" class="link-light d-block py-1">âž• Add Supplier</a></li>
           <li><a href="{% url 'companyview' %}" class="link-light d-block py-1">ðŸ“‹ View Supplier</a></li>
         </ul>
        </div>
       <button class="btn btn-toggle align-items-center rounded collapsed text-white ps-3 text-start" 
             data-bs-toggle="collapse" data-bs-target="#supplier-collapse" aria-expanded="false">
       ðŸ’Š Reports
    </button>
      <div class="collapse" id="supplier-collapse">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-4">
           <li><a href="{% url 'daily_sales_report' %}" class="link-light d-block py-1">ðŸ“‹ Daily Sales Report</a></li>
           <li><a href="{% url 'monthly_sales_report' %}" class="link-light d-block py-1">ðŸ“‹ Monthly Sales Report</a></li>
          <li><a href="{% url 'yearly_sales_report' %}" class="link-light d-block py-1">ðŸ“‹ Yearly Sales Report</a></li>

         </ul>
        </div>


      

      <a class="nav-link text-white" href="{% url 'cart_list' %}"><i class="fas fa-plus"></i> Your Cart List</a>
      <a class="nav-link text-white" href=""><i class="fas fa-pills"></i> Medicines</a>
      <a class="nav-link text-white" href=""><i class="fas fa-user-plus"></i> Supplier</a>
      <a class="nav-link text-white" href=""><i class="fas fa-list"></i> Suppliers</a>
    </nav>
  </div>

  <!-- Content Area -->
  <div class="content-wrapper">
    {% block content %}{% endblock content %}
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-2 fixed-bottom">
    <small>&copy; 2025 Medic System</small>
  </footer>

  <!-- JS Scripts -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script src="{% static 'assets/js/vendor/jquery-3.3.1.min.js' %}"></script>
  <script src="{% static 'assets/js/vendor/jquery.cookie.js' %}"></script>
  <script src="{% static 'assets/js/vendor/modernizr-3.6.0.min.js' %}"></script>
  <script src="{% static 'assets/js/vendor/wow.min.js' %}"></script>
  <!-- Including Javascript -->
  <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins.js' %}"></script>
  <script src="{% static 'assets/js/popper.min.js' %}"></script>
  <script src="{% static 'assets/js/lazysizes.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>